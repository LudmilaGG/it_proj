# ИНСТРУКЦИЯ К ПРОЕКТУ

***

## Инструкция по запуску программы

1. Установка Python и необходимых пакетов

Сначала нужно установить интерпретатор языка Python, который можно взять [здесь] (https://www.python.org/downloads/)

- Выберите способ установки: Install Now

- Отметьте необходимые опции установки (рекомендуем выбрать все опции)

Затем среду программирования, например, JetBrains PyCharm [отсюда] (https://www.jetbrains.com/pycharm/download)

- Скачайте установочный файл Community

- Следуйте инструкции, доступной по вышеуказанной ссылке

Установить необходимые python пакеты можно через командную строку:

- Откройте командную строку

- Перейдите в папку с проектом

- Запустите команду `pip install -r requirements.txt`

2 . Установка через Anaconda (включает в себя интерпретатор языка Python, набор наиболее часто используемых библиотек и удобную среду разработки и исполнения): для установки нужно скачать [дистрибутив] (https://www.continuum.io/downloads)

- Принимаем лицензионное соглашение

- Выберите «Register Anaconda as the system Python 3.5» – использовать Anaconda, как интерпретатор Python 3.5 по умолчанию

Для запуска среды программирования Jupyter Notebook (входит в состав Anaconda):

- Перейдите в папку Scripts (она находится внутри каталога, в котором установлена Anaconda)

- В командной строке наберите: > ipython notebook

Для установки пакетов: запустить Anaconda Navigator

- Перейдите на вкладку "Environments"

- В поле "Search Packages" вбить и установить поочередно пакеты matplotlib, numpy, pandas, python, scikit, scipy, xlrd

3 . Скачивание данных

Данные можно скачать с [disk.google.com] (https://drive.google.com/drive/folders/1VwgP8Vc_RCNAoZK5tWt6aUqdET6cS5vS) (на момент 29.12.18)

Поместить файл payments.xls, анкеты и контракты в папку `data` проекта; анкеты и контракты должны находиться в папках `profile` и `contracts` соответственно, (должен получиться путь `<папка проекта>/data/profile/A10003.xlsx` )

4 . Импортировать в python встроенную СУБД SQLite

В настройках среды программирования установите библиотеки: matplotlib, numpy, pandas, python, scikit, scipy, xlrd

Пример: ‘setting -> project interpreter -> плюсик -> в поле поиска xlrd -> install’

5 . Запуск скрипта: … Скачайте [скрипты] (https://github.com/LudmilaGG/it_proj): ‘Download ZIP’

Перенесите скрипты в папку проекта:

6 . Открыть Jupyter Notebook и запустить интересующий скрипт: например, первый блок `python task1.py`, или же запустить весь скрипт `python main.py`, который реализует общий интерфейс (первый блок выдает таблицы анкет заемщиков, их контрактов и платежей; второй блок вычисляет наличие просрочки, выводит таблицу заёмщиков с указанием факта дефолта на заданном горизонте риска и по выбранной характеристике из анкетных данных заемщика строит показатели WOE и IV; третий блок присваивает рейтинг

показателям по заемщикам и дает возможность выгрузить отчет; четвертый блок присваивает общий рейтинг заемщикам и дает возможность выгрузить отчет)

7 . Запустить скрипт через командную строку:

- Откройте командную строку

- Перейдите в папку с проектом

- Запустите ‘python task1.py’

8 . Выбор горизонта риска

Впишите количество месяцев интересующего горизонта риска

9 . Выбор категориальной характеристики заемщика для построения WOE и IV

Впишите название характеристики

10 . Экспорт результатов

- Укажите путь для файла (Для сохранения в текущую директорию ввести ‘./’ или же ввести свой путь в формате ‘C:\\\Users\\\Asus\\\Desktop’)

- Введите имя экспортируемого документа или нажмите ‘Enter’ для сохранения с именем, заданным по умолчанию.

- Выберите путь для сохранения отчета (Введите для сохранения в текущую директорию ‘./’ или нажмите ‘Enter’ , или задать другой путь в формате ‘C:\\\Users\\\Asus\\\Desktop’)

- Введите название отчета или нажмите ‘Enter’ для сохранения с именем, заданным по умолчанию.

## Ожидаемые результаты

0. Скрипт main.py или же скрипты отдельных заданий отработали без ошибок

1. Блок автоматического импорта в БД неструктурированных данных

 - Созданы таблицы "profile"(анкеты), "contract"(контракты), "payment"(таблица платежей по контрактам), "values_map"(таблица словарей)

 - Таблица "profile" содержит 64 строки, в категориальных переменных ("employed_by", "education", "marital_status", "position", "income_type", "housing") находятся id записей, а не текстовые значения

 - Таблица "contract" содержит 61 строку, в категориальной переменной "type" находятся id записей, а не текстовые значения

 - Таблица "values_map" содержат пары значений "key:value:table_name" - закодированные категориальные переменные

2. Блок анализа и предобработки данных

 - Определен индикатор (дефолт/ не дефолт) и найдены моменты просрочки по правилу 90+ для каждого контракта с момента выдачи кредита на заданном пользователем горизонте риска

 - По выбранному пользователем горизонту риска строится таблица заемщиков с кредитами сроком не меньше заданного горизонта, с флагом ‘дефолт/не дефолт’ на выбранном горизонте с момента выдачи кредита

 - По выбранной пользователем характеристике (колонке) из таблицы анкетных данных заемщиков (profile) строятся показатели WOE и IV (таблица и картинка), так как все переменные либо категориальные, либо были квантилизированы

 - Для построения WOE и IV доступны 12 различных переменных. В том числе предложена сконструированная переменная "age".

 - После вывода WOE и IV пользователю предлагается экспорт результатов анализа данных (таблица и графики) в файловую систему в общепринятых форматах (.csv и .png для таблиц и графиков соответственно)

3. Блок присвоения рейтингового балла по переменным 

 - Произведена группировка (объединение значений в диапазоны) и квантификация (присвоение баллов) анкетным показателям заемщиков. Группировка произведена по принципу существенности различия WOE между группами.

 - При квантификации всех показателей мин/макс присваиваемых баллов одинаковы (мин. - 0, макс. - 25), но может присваиваться не весь диапазон значений между ними

 - Пользователю предлагается экспорт результатов (таблица {клиент/score по по различным анкетным параметрам}) в файловую систему в формате .csv

 4. Определение совокупного рейтингового балла

 - Весовые коэффициенты присвоены таким образом, что максимальный возможный рейтинговый балл равен 100

 - Соотношение коэффициентов отвечает соотношению разделяющей способности соответствующих переменных. Для указания разделяющей способности использован показатель IV.

 - Совокупный рейтинговый балл рассчитывается как сумма рейтингов по каждой переменной с соответствующим весом. Результаты присвоения рейтингового балла хранятся в таблице {заемщик/итоговый рейтинговый балл}.

 - Разделяющая способность совокупного рейтингового балла оценивается с помощью ROC-кривой и AUC. Результат представлен графически с указанием горизонта риска и AUC.

 - Пользователь по запросу экспортирует результаты в файловую систему (таблица {заемщик/итоговый рейтинговый балл} в формате .csv и ROC-кривая в формате .png).
